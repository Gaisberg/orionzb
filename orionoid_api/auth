User Authentication
Authenticate a user through an interactive process, similar to how oAuth works. If you choose to use tradtional API key authentication, this step can be skipped. The process should be handled as follows:
Make a request with your app API key to the authentication endpoint. The following details are returned:
link: A link that the user has to visit in a browser.
code: A short code that the user has to enter on the visited website.
qr: A link to a QR code image that redirects to the link when scanned.
interval: The minimum interval, in seconds, that your subsequent API requests should be apart.
expiration: The UTC timestamp after which the code will expire.
Display the link and code, or the QR code, or both, to the user.
The user opens the link in a browser, logs into Orion, and enters the given code.
While the user is busy with the previous step, your app should continuously make API requests with the given code to check if the authentication was completed by the user. These requests should be done every few seconds, according to the interval parameter returned by the first request. This request is identical to the first request, except that you also add the code parameter. The following can be returned by the request:
userauthpending (success): The authentication process is still pending, waiting for the user's approval. You should continue making the API requests until a different result is returned.
userauthapprove (success): The user has approved access for your app. The request contains a token parameter you should use for all subsequent requests.
userauthinreject (error): The user completed the process, but rejected access for your app. You should cancel the authentication process in your app.
userauthexpired (error): The user did not complete the authentication within the stipulated time period. The code will no longer work and the entire process has to be restarted.
All subsequent API requests should be accompanied by the token parameter. There is no need to any API keys to requests anymore. Note that the token contains both the app's and the user's encrypted API keys. If either of these keys change in the future, the token will be invalidated and the user will have to authenticate again.
Parameters
Name	Required	Type	Options	Example	Description
mode
Yes
Enum
user
user
The API mode which should be set to user for this query.
action
Yes
Enum
authenticate
authenticate
The API action which should be set to authenticate for this query.
keyapp
Yes
String
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
The app API key.
code
No
String
A1B-2C3
The authentication code. This parameter is not required for the first API requests that initiates the authentication. Only subsequent requests that check if the process was completed require this parameter.
Request
API	
URL:	https://api.orionoid.com
Body:	keyapp=AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA&mode=user&action=authenticate

API	
URL:	https://api.orionoid.com
Body:	keyapp=AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA&mode=user&action=authenticate&code=A1B-2C3
Response
{
name: "Orion API",
version: "4.0.0",
result: {
status: "success",
type: "userauthinitialize",
description: "Authentication Initialized",
message: "The authentication was successfully initiated."
},
data: {
code: "A1B-2C3",
interval: 5,
expiration: 1630409741,
link: https://auth.orionoid.com,
direct: https://auth.orionoid.com/A1B2C3,
qr: https://orionoid.com/qr/FWEQC36FRPUUYWVFY6UYFK6WXBY6YNOCAFR7UXEDVEPV6PDQXDG4F5KZJ3TTN4KEWZNWFHMEPIZU2
}
}

{
name: "Orion API",
version: "4.0.0",
result: {
status: "success",
type: "userauthpending",
description: "Authentication Pending",
message: "The authentication is still in progress and the user has not completed the process yet."
}
}

{
name: "Orion API",
version: "4.0.0",
result: {
status: "success",
type: "userauthapprove",
description: "Authentication Approved",
message: "The authentication was successfully approved."
},
data: {
user: {
id: "BBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBB",
email: "example@gmail.com",
username: "example"
},
app: {
id: "AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA",
popularity: {
count: 1000,
percent: 0.5
},
type: "web",
status: "active",
time: {
added: 1531676929,
updated: 1531676929
},
name: "Example",
description: "Example App",
link: https://orionoid.com,
logo: https://orionoid.com/logo/AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
},
token: "ZGWL3C6R2D74BKPM5LO2ZAH6HX4MEQ6LLQW4MCEA4HB379YR2GURXQPH43CEW6G7JNOGXSLBJNECCNQNFVT3FOEDR3FTNUPGMBF3EGBMPARPPNQ5Y4BTLWSI6RHRADS1"
}
}